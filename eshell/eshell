#!/bin/sh
emacsclient $@ -c -a "" -s "shell" -e "(progn  (eshell t) (unless (boundp '-eshell-client-hook-added) (add-hook 'delete-terminal-functions (lambda (frame) (let ((buffer (-find (lambda (x) (with-current-buffer x eshell-mode)) (buffer-list)))) (when buffer (kill-buffer buffer)))))) (setq -eshell-client-hook-added t) (hide-mode-line-mode +1) (advice-add #'eshell-exec-visual :before #'eshell-term-hide-mode-line-after-buffer-change '((depth . -1))) (defalias 'eshell/exit #'save-buffers-kill-terminal) (setq frame-title-format '(\"\" user-login-name \"@\" system-name \":\" default-directory)))"
